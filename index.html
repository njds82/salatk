<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="صلاتك - تطبيق لمساعدتك على الالتزام بالصلوات وبناء عادات عبادية">
    <title>صلاتك - Salatk</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&family=Cairo:wght@300;400;600;700;900&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <meta name="theme-color" content="#0F766E">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- Adhan.js for Prayer Times -->
    <script src="https://cdn.jsdelivr.net/npm/adhan@4.4.3/lib/bundles/adhan.umd.min.js"></script>



    <!-- Supabase JS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="logo">
                <img src="assets/images/logo.png" alt="Salatk Logo" class="logo-icon" width="40" height="40">
                <h1 class="logo-text" data-i18n="app_name">صلاتك</h1>
            </div>

            <div class="header-actions">
                <!-- Points Display -->
                <div class="points-badge" id="pointsDisplay">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M10 2 L12 8 L18 8 L13 12 L15 18 L10 14 L5 18 L7 12 L2 8 L8 8 Z" fill="currentColor" />
                    </svg>
                    <span id="pointsValue">0</span>
                </div>

                <!-- Theme Toggle -->
                <button class="icon-btn" id="themeToggle" aria-label="Toggle theme">
                    <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20">
                        <circle cx="10" cy="10" r="4" fill="currentColor" />
                        <path
                            d="M10 2 L10 4 M10 16 L10 18 M2 10 L4 10 M16 10 L18 10 M4 4 L5.5 5.5 M14.5 14.5 L16 16 M16 4 L14.5 5.5 M5.5 14.5 L4 16"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" style="display: none;">
                        <path d="M17 10.5 A7 7 0 1 1 10.5 3 A5 5 0 0 0 17 10.5" fill="currentColor" />
                    </svg>
                </button>

                <!-- Notification History -->
                <button class="icon-btn" id="notifToggle" aria-label="Notifications">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="notif-badge" id="notifBadge" style="display: none;"></span>
                </button>

                <!-- Language Toggle -->
                <button class="icon-btn" id="langToggle" aria-label="Toggle language">
                    <span class="lang-text">EN</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Navigation -->
        <nav class="main-nav">
            <a href="#daily-prayers" class="nav-item active" data-page="daily-prayers">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <rect x="4" y="10" width="16" height="12" rx="2" stroke="currentColor" stroke-width="2"
                        fill="none" />
                    <path d="M8 6 L12 10 L16 6" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" />
                </svg>
                <span data-i18n="nav_daily_prayers">صلوات اليوم</span>
            </a>

            <a href="#qada-prayers" class="nav-item" data-page="qada-prayers">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none" />
                    <path d="M12 6 L12 12 L16 14" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" />
                </svg>
                <span data-i18n="nav_qada_prayers">الصلاة الفائتة</span>
            </a>

            <a href="#habits" class="nav-item" data-page="habits">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M12 2 L14 9 L21 9 L15.5 13.5 L17.5 21 L12 16.5 L6.5 21 L8.5 13.5 L3 9 L10 9 Z"
                        stroke="currentColor" stroke-width="2" fill="none" />
                </svg>
                <span data-i18n="nav_habits">متتبع العادات</span>
            </a>

            <a href="#statistics" class="nav-item" data-page="statistics">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <rect x="4" y="14" width="4" height="7" stroke="currentColor" stroke-width="2" fill="none" />
                    <rect x="10" y="9" width="4" height="12" stroke="currentColor" stroke-width="2" fill="none" />
                    <rect x="16" y="3" width="4" height="18" stroke="currentColor" stroke-width="2" fill="none" />
                </svg>
                <span data-i18n="nav_statistics">الإحصائيات</span>
            </a>

            <a href="#leaderboard" class="nav-item" data-page="leaderboard">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M12 2 L15 8 L22 9 L17 14 L18.5 21 L12 17.5 L5.5 21 L7 14 L2 9 L9 8 Z" stroke="currentColor"
                        stroke-width="2" fill="none" />
                </svg>
                <span data-i18n="nav_leaderboard">لوحة الصدارة</span>
            </a>

            <a href="#settings" class="nav-item" data-page="settings">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none" />
                    <path
                        d="M12 3 L12 5 M12 19 L12 21 M3 12 L5 12 M19 12 L21 12 M5.5 5.5 L7 7 M17 17 L18.5 18.5 M18.5 5.5 L17 7 M7 17 L5.5 18.5"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <span data-i18n="nav_settings">الإعدادات</span>
            </a>
        </nav>

        <!-- Page Content -->
        <main class="page-content" id="pageContent">
            <!-- Dynamic content will be loaded here -->
        </main>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Notification Center -->
    <div class="notif-center" id="notifCenter" style="display: none;">
        <div class="notif-header">
            <h3 data-i18n="notifications_title">الإشعارات</h3>
            <button class="close-btn" id="closeNotif">&times;</button>
        </div>
        <div class="notif-list" id="notifList">
            <!-- Notifications will be injected here -->
        </div>
        <div class="notif-footer">
            <button class="btn btn-secondary btn-sm" id="clearNotifs" data-i18n="clear_all">مسح الكل</button>
        </div>
    </div>

    <!-- Modal Container -->
    <div class="modal-overlay" id="modalOverlay" style="display: none;"></div>

    <!-- Scripts -->
    <script src="js/i18n.js"></script>
    <script src="js/date-utils.js"></script>
    <script src="js/db.js"></script>
    <script src="js/services/settings-service.js"></script>
    <script src="js/services/prayer-service.js"></script>
    <script src="js/services/habit-service.js"></script>
    <script src="js/services/points-service.js"></script>

    <!-- data-manager.js kept for backward compatibility during migration, but logic inside will be gutted/redirected -->
    <script src="js/data-manager.js"></script>
    <script src="js/points-manager.js"></script>
    <script src="components/toast.js"></script>
    <script src="components/modal.js"></script>
    <script src="components/prayer-card.js"></script>
    <script src="components/habit-card.js"></script>
    <script src="components/points-display.js"></script>
    <script src="components/charts.js"></script>
    <script src="js/pages/daily-prayers.js"></script>
    <script src="js/pages/qada-prayers.js"></script>
    <script src="js/pages/habits.js"></script>
    <script src="js/pages/statistics.js"></script>
    <script src="js/pages/settings.js"></script>
    <script src="js/prayer-manager.js"></script>
    <script src="js/supabaseClient.js"></script>
    <script src="js/auth-manager.js"></script>
    <script src="js/pages/auth.js"></script>
    <script src="js/sync-manager.js"></script>
    <script src="js/pages/leaderboard.js"></script>
    <script src="js/ui-helpers.js"></script>
    <script src="js/app.js"></script>
</body>

</html>